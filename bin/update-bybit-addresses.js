const fs = require('fs');
const path = require('path');

const url = 'https://hackscan.hackbounty.io/public/hack-address.json';
const outputFile = path.join(__dirname, '../src/bybit-addresses.ts');

fetch(url)
  .then((response) => response.json())
  .then((jsonData) => {
    const addresses = jsonData['0221'].eth;

    fs.writeFileSync(
      outputFile,
      [
        '// This file is automatically generated by bin/update-bybit-addresses.js',
        '// Do not edit this file manually',
        'export const BYBIT_ADDRESSES = new Set([',
        addresses.map((address) => `  '${address}',`).join('\n'),
        ']);\n',
      ].join('\n'),
    );
  });
